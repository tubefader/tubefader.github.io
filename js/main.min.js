var main={exists:function(){if(arguments.length>0){var e="string"==typeof arguments[0]?window[arguments[0]]:arguments[0];if("object"!=typeof e||null===e)return!1;for(var t=1;t<arguments.length;t++)if(e=e[arguments[t]],"object"!=typeof e||null===e)return!1}return!0},api:{src:"https://apis.google.com/js/api.js",key:"AIzaSyACWZUx0jw3tqKl5NVuXqxuB7siYiziPDA",stack:[],Video:function(e,t){if(Array.isArray(e)){for(var i=0;i<e.length;i++)e[i]=new main.api.Video(e[i],t);return e}this.id=e.id.videoId,this.title=e.snippet.title,this.channel=e.snippet.channelTitle,this.thumbnail=e.snippet.thumbnails["default"].url,this.url="https://www.youtube.com/watch?v="+this.id,this.related=t instanceof main.api.Video?49==t.related?0:t.related+1:0},"do":function(e){this.provided?e():this.stack.push(e)},get provided(){return main.exists("gapi","client","youtube")},get load(){var e=this;return function(){gapi.load("client",function(){gapi.client.load("youtube","v3",function(){gapi.client.setApiKey(e.key);for(var t=0;t<e.stack.length;t++)e.stack[t]();e.stack=[]})})}},search:function(e,t){var i=this;this["do"](function(){gapi.client.youtube.search.list({q:e,part:"snippet",type:"video",maxResults:15}).execute(function(e){main.exists(e,"result","items")&&t(new i.Video(e.result.items))})})},infos:function(e,t){var i=this;this["do"](function(){gapi.client.youtube.videos.list({id:e,part:"snippet",type:"video",maxResults:1}).execute(function(e){main.exists(e,"result","items")&&t(e.result.items.length>0?new i.Video(e.result.items[0]):null)})})},related:function(e,t){if(e instanceof this.Video){var i=this;this["do"](function(){gapi.client.youtube.search.list({relatedToVideoId:e.id,part:"snippet",type:"video",maxResults:e.related+1}).execute(function(n){if(main.exists(n,"result","items")){var s=n.result.items,a=s.length>e.related+1?e.related+1:0;s.length>0&&t(new i.Video(n.result.items[a],e))}})})}},append:function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.src=this.src,e.addEventListener("load",this.load),e.addEventListener("readystatechange",function(){"complete"===this.readyState&&this.onload()}),document.head.appendChild(e)},init:function(){this.append()}},frame:{src:"https://www.youtube.com/iframe_api?callback=main.frame.load",stack:[],"do":function(e){this.provided?e():this.stack.push(e)},get provided(){return main.exists("YT")},load:function(){for(var e=0;e<this.stack.length;e++)this.stack[e]();this.stack=[]},append:function(){var e=this,t=document.createElement("script");t.async=!0,t.defer=!0,t.src=this.src,window.onYouTubeIframeAPIReady=function(){e.load()},document.head.appendChild(t)},init:function(){this.append()}},Side:function(e){var t=this,i=null,n=!1,s=document.createElement("li");s.className="empty",s.appendChild(document.createTextNode("No result")),this.element=document.querySelector("."+e),this.search=this.element.querySelector(".search"),this.input=this.element.querySelector("input"),this.results=this.element.querySelector("ul"),this.video=null,Object.defineProperties(this,{visible:{set:function(e){e?t.search.setAttribute("data-visible",""):t.search.removeAttribute("data-visible")}},keep:{get:function(){return n},set:function(e){n=!!e,e?document.body.setAttribute("data-keep",""):document.body.removeAttribute("data-keep")}},searching:{set:function(e){e?this.input.setAttribute("data-searching",""):this.input.removeAttribute("data-searching")}}}),this.url=function(e){var t=e.match(/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/);return null!==t&&t[5]},this.clear=function(){clearTimeout(i)},this.show=function(){this.hideLater(),this.visible=!0},this.hide=function(){this.keep||(this.clear(),this.visible=!1)},this.hideLater=function(){this.clear(),i=setTimeout(function(){t.hide()},3e3)},this.result=function(e){var i=document.createElement("li"),n=document.createElement("img");n.className="thumbnail",n.src=e.thumbnail;var s=document.createElement("div");s.className="infos";var a=document.createElement("span");a.className="title";var r=document.createElement("span");return r.className="channel",r.appendChild(document.createTextNode(e.channel)),a.appendChild(document.createTextNode(e.title)),s.appendChild(a),s.appendChild(r),i.appendChild(n),i.appendChild(s),i.addEventListener("mousedown",function(){t.video.loadVideoById(e.id)}),i},this.element.addEventListener("mousemove",function(){t.show()}),this.element.addEventListener("mouseout",function(){t.hide()}),this.input.addEventListener("focus",function(){t.keep=!0,""!==t.results.innerHTML&&(t.searching=!0),t.clear()}),this.input.addEventListener("blur",function(){t.keep=!1,t.searching=!1,t.hide()}),this.input.addEventListener("keydown",function(){var e=this;setTimeout(function(){var i=e.value;if(""===i)t.searching=!1,t.results.innerHTML="";else{var n=t.url(i);n?main.api.infos(n,function(e){t.searching=!0,t.results.innerHTML="",e?t.results.appendChild(t.result(e)):t.results.appendChild(s)}):main.api.search(i,function(e){if(t.searching=!0,t.results.innerHTML="",0===e.length)t.results.appendChild(s);else for(var i=0;i<e.length;i++)t.results.appendChild(t.result(e[i]))})}},1)}),main.frame["do"](function(){var e=document.createElement("div");t.element.appendChild(e),t.video=new YT.Player(e,{playerVars:{color:"white",autoplay:0},events:{onReady:function(e){e.target.pauseVideo()}}})})},cursor:{timeout:null,set visible(e){e?document.body.removeAttribute("data-cursor-hidden"):document.body.setAttribute("data-cursor-hidden","")},clear:function(){clearTimeout(this.timeout)},show:function(){this.hide(),this.visible=!0},hide:function(){var e=this;this.clear(),this.timeout=setTimeout(function(){e.visible=!1},3e3)},init:function(){var e=this;this.hide(),document.body.addEventListener("mousemove",function(){e.show()})}},left:null,right:null,init:function(){this.api.init(),this.frame.init(),this.cursor.init(),this.left=new this.Side("left"),this.right=new this.Side("right")}};main.init();